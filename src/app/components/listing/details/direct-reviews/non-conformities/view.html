<div class="non-conformities" ng-if="!$ctrl.nonConformities || $ctrl.nonConformities.length === 0">
  <div class="non-conformity__wide">
    No Requirements or Non-Conformities exist for this Direct Review
  </div>
</div>
<div class="non-conformities" ng-if="$ctrl.nonConformities && $ctrl.nonConformities.length > 0">
  <div class="non-conformities__gridtable-header">
    <div class="non-conformities__requirements-header">Requirements</div>
    Requirements Reviewed
  </div>
  <div class="non-conformities__gridtable-header">Non-Conformity Summary</div>
  <div class="non-conformities__gridtable-header">Review Result</div>
  <div ng-repeat-start="nc in $ctrl.nonConformities" class="non-conformity__gridtable-header non-conformity__gridtable-header--first" ng-class="nc.nonConformityStatus === 'Open' ? 'non-conformity__gridtable-header--open' : 'non-conformity__gridtable-header--closed'" ng-click="nc.open = !nc.open">
    <div>
      <span class="non-conformity__header-toggle"><i class="fa fa-lg" ng-class="nc.open ? 'fa-caret-down' : 'fa-caret-right'"></i></span> {{ nc.requirement ? nc.requirement : 'None recorded' }}
    </div>
  </div>
  <div class="non-conformity__gridtable-header" ng-class="nc.nonConformityStatus === 'Open' ? 'non-conformity__gridtable-header--open' : 'non-conformity__gridtable-header--closed'" ng-click="nc.open = !nc.open">
    <div>{{ nc.nonConformitySummary ? nc.nonConformitySummary : 'None recorded' }}</div>
  </div>
  <div class="non-conformity__gridtable-header non-conformity__gridtable-header--last" ng-class="nc.nonConformityStatus === 'Open' ? 'non-conformity__gridtable-header--open' : 'non-conformity__gridtable-header--closed'" ng-click="nc.open = !nc.open">
    <div>{{ nc.nonConformityStatus ? nc.nonConformityStatus : 'None recorded' }}</div>
  </div>
  <div class="non-conformity__basic-information panel-body" ng-if="nc.open" ng-repeat-end>
    <div class="non-conformity__wide">
      <div class="data-label">
        Requirement <button class="non-conformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button>
      </div>
      <div class="non-conformity__data-element">
        {{ nc.requirement ? nc.requirement : 'None recorded' }}
      </div>
    </div>
    <div class="non-conformity__wide">
      <div class="data-label">
        Developer Associated Listings<button class="non-conformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button>
      </div>
      <div class="non-conformity__data-element">
      <div class="non-conformity__data-element" ng-if="!nc.developerAssociatedListings || nc.developerAssociatedListings.length === 0">None</div>
        <ul class="non-conformity__developer-associated-listings" ng-if="nc.developerAssociatedListings && nc.developerAssociatedListings.length > 0">
          <li ng-repeat="listing in nc.developerAssociatedListings"><a ui-sref="listing({id: listing, initialPanel: 'directReviews'})">{{ listing }}</a></li>
        </ul>
      </div>
    </div>
    <div class="non-conformity__wide">
      <div class="data-label">
        Date of Determination<button class="non-conformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button>
      </div>
      <div class="non-conformity__data-element">
        {{ nc.friendlyDateOfDetermination }}
      </div>
    </div>
    <div class="non-conformity__wide">
      <div class="data-label">
        Findings<button class="non-conformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button>
      </div>
      <div class="non-conformity__data-element">
        {{ nc.nonConformityFindings ? nc.nonConformityFindings : 'None recorded' }}
      </div>
    </div>
    <div class="non-conformity__narrow">
      <div class="data-label">
        Corrective Action Plan Approval Date<button class="non-conformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button>
      </div>
      <div class="non-conformity__data-element">
        {{ nc.friendlyCapApprovalDate }}
      </div>
    </div>
    <div class="non-conformity__narrow">
      <div class="data-label">
        Date Corrective Action Began<button class="non-conformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button>
      </div>
      <div class="non-conformity__data-element">
        {{ nc.friendlyCapStartDate }}
      </div>
    </div>
    <div class="non-conformity__narrow">
      <div class="data-label">
        Date Corrective Action Must Be Completed<button class="non-conformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button>
      </div>
      <div class="non-conformity__data-element">
        {{ nc.friendlyCapMustCompleteDate }}
      </div>
    </div>
    <div class="non-conformity__wide">
      <div class="data-label">
        Developer Explanation<button class="non-conformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button>
      </div>
      <div class="non-conformity__data-element">
        {{ nc.developerExplanation ? nc.developerExplanation : 'None recorded' }}
      </div>
    </div>
    <div class="non-conformity__wide">
      <div class="data-label">
        Date Corrective Action Was Completed<button class="non-conformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button>
      </div>
      <div class="non-conformity__data-element">
        {{ nc.friendlyCapEndDate }}
      </div>
    </div>
    <div class="non-conformity__wide">
      <div class="data-label">
        Resolution<button class="non-conformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button>
      </div>
      <div class="non-conformity__data-element">
        {{ nc.resolution ? nc.resolution : 'None recorded' }}
      </div>
    </div>
  </div>
</div>
