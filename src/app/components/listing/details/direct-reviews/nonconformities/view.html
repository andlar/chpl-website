<div class="nonconformities" ng-if="!$ctrl.nonconformities || $ctrl.nonconformities.length === 0">
  <div class="nonconformity__wide">
    No Requirements or Nonconformities exist for this Direct Review
  </div>
</div>
<div class="nonconformities" ng-if="$ctrl.nonconformities && $ctrl.nonconformities.length > 0">
  <div class="nonconformities__gridtable-header">
    <div class="nonconformities__requirements-header">Requirements</div>
    Requirements Reviewed
  </div>
  <div class="nonconformities__gridtable-header">Non-conformity Summary</div>
  <div class="nonconformities__gridtable-header">Review Result</div>
  <div ng-repeat-start="nc in $ctrl.nonconformities" class="nonconformity__gridtable-header nonconformity__gridtable-header--first" ng-class="nc.nonconformityStatus === 'Closed' ? 'nonconformity__gridtable-header--closed' : 'nonconformity__gridtable-header--open'" ng-click="nc.open = !nc.open">
    <div class="nonconformity__gridtable-header">
      <span class="nonconformity__header-toggle"><i class="fa fa-lg" ng-class="nc.open ? 'fa-caret-down' : 'fa-caret-right'"></i></span> {{ nc.requirement ? nc.requirement : 'None recorded' }}
    </div>
  </div>
  <div class="nonconformity__gridtable-header" ng-class="nc.nonconformityStatus === 'Closed' ? 'nonconformity__gridtable-header--closed' : 'nonconformity__gridtable-header--open'" ng-click="nc.open = !nc.open">
    <div class="nonconformity__gridtable-header">{{ nc.nonconformitySummary ? nc.nonconformitySummary : 'None recorded' }}</div>
  </div>
  <div class="nonconformity__gridtable-header nonconformity__gridtable-header--last" ng-class="nc.nonconformityStatus === 'Closed' ? 'nonconformity__gridtable-header--closed' : 'nonconformity__gridtable-header--open'" ng-click="nc.open = !nc.open">
    <div class="nonconformity__gridtable-header">{{ nc.nonconformityStatus ? nc.nonconformityStatus : 'None recorded' }}</div>
  </div>
  <div class="nonconformity__basic-information panel-body" ng-if="nc.open" ng-repeat-end>
    <div class="nonconformity__wide">
      <div class="data-label">
        <button class="nonconformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button> Requirement
      </div>
      <div class="nonconformity__data-element">
        {{ nc.requirement ? nc.requirement : 'None recorded' }}
      </div>
    </div>
    <div class="nonconformity__wide">
      <div class="data-label">
        <button class="nonconformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button> Developer Associated Listings
      </div>
      <div class="nonconformity__data-element">
      <div class="nonconformity__data-element" ng-if="!nc.developerAssociatedListings || nc.developerAssociatedListings.length === 0">None</div>
        <ul class="nonconformity__developer-associated-listings" ng-if="nc.developerAssociatedListings && nc.developerAssociatedListings.length > 0">
          <li ng-repeat="listing in nc.developerAssociatedListings">{{ listing }}</li>
        </ul>
      </div>
    </div>
    <div class="nonconformity__wide">
      <div class="data-label">
        <button class="nonconformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button> Date of Determination
      </div>
      <div class="nonconformity__data-element">
        {{ dr.dateOfDetermination ? (dr.dateOfDetermination | date : 'mediumDate' : 'UTC') : 'Has not been determined' }}
      </div>
    </div>
    <div class="nonconformity__wide">
      <div class="data-label">
        <button class="nonconformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button> Findings
      </div>
      <div class="nonconformity__data-element">
        {{ nc.nonconformityFindings ? nc.nonconformityFindings : 'None recorded' }}
      </div>
    </div>
    <div class="nonconformity__narrow">
      <div class="data-label">
        <button class="nonconformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button> Corrective Action Plan Approval Date
      </div>
      <div class="nonconformity__data-element">
        {{ dr.capApprovalDate ? (dr.capApprovalDate | date : 'mediumDate' : 'UTC') : 'Has not been approved' }}
      </div>
    </div>
    <div class="nonconformity__narrow">
      <div class="data-label">
        <button class="nonconformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button> Date Corrective Action Began
      </div>
      <div class="nonconformity__data-element">
        {{ dr.capStartDate ? (dr.capStartDate | date : 'mediumDate' : 'UTC') : 'Has not been approved' }}
      </div>
    </div>
    <div class="nonconformity__narrow">
      <div class="data-label">
        <button class="nonconformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button> Date Corrective Action Must Be Completed
      </div>
      <div class="nonconformity__data-element">
        {{ dr.capMustCompleteDate ? (dr.capMustCompleteDate | date : 'mediumDate' : 'UTC') : 'Has not been approved' }}
      </div>
    </div>
    <div class="nonconformity__wide">
      <div class="data-label">
        <button class="nonconformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button> Developer Explanation
      </div>
      <div class="nonconformity__data-element">
        {{ nc.developerExplanation ? nc.developerExplanation : 'None recorded' }}
      </div>
    </div>
    <div class="nonconformity__wide">
      <div class="data-label">
        <button class="nonconformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button> Date Corrective Action Was Completed
      </div>
      <div class="nonconformity__data-element">
        {{ dr.capEndDate ? (dr.capEndDate | date : 'mediumDate' : 'UTC') : 'Has not ended' }}
      </div>
    </div>
    <div class="nonconformity__wide">
      <div class="data-label">
        <button class="nonconformity__tooltip-button btn btn-link" uib-tooltip="TBD" tooltip-trigger="'mouseenter focus click'"><span class="sr-only">TBD</span><i class="fa fa-info-circle"></i></button> Resolution
      </div>
      <div class="nonconformity__data-element">
        {{ nc.resolution ? nc.resolution : 'None recorded' }}
      </div>
    </div>
  </div>
</div>
